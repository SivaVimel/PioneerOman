import{g as E}from"./index.BOXtcntR.js";const k="modulepreload",y=function(c){return"/"+c},f={},w=function(e,s,d){let i=Promise.resolve();if(s&&s.length>0){let r=function(t){return Promise.all(t.map(a=>Promise.resolve(a).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),u=n?.nonce||n?.getAttribute("nonce");i=r(s.map(t=>{if(t=y(t),t in f)return;f[t]=!0;const a=t.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${l}`))return;const o=document.createElement("link");if(o.rel=a?"stylesheet":k,a||(o.as="script"),o.crossOrigin="",o.href=t,u&&o.setAttribute("nonce",u),document.head.appendChild(o),a)return new Promise((v,g)=>{o.addEventListener("load",v),o.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${t}`)))})}))}function h(r){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=r,window.dispatchEvent(n),!n.defaultPrevented)throw r}return i.then(r=>{for(const n of r||[])n.status==="rejected"&&h(n.reason);return e().catch(h)})},b=c=>{c.forEach(e=>{e.isIntersecting&&e.target instanceof p&&e.target.enhance()})},m=new IntersectionObserver(b,{rootMargin:"0px",threshold:[.5]}),S=()=>w(()=>import("./hls.Bcmw3eFa.js"),[]);class p extends HTMLElement{#t=!1;#n;#s;#o=window.matchMedia("(prefers-reduced-motion: reduce)").matches;#r="connection"in navigator?navigator.connection.saveData===!0:!1;#e;constructor(){super(),this.#t=this.dataset.autoplay==="true"&&!this.#r&&!this.#o,this.#n=this.dataset.mp4Url,this.#s=this.dataset.streamingUrl,this.#e=this.querySelector("video[data-video]")}connectedCallback(){if(!this.#e||!this.#n||!this.#s){console.warn("VideoBlock: missing required elements/attributes",this);return}this.#t||this.addEventListener("click",this.#i.bind(this),{once:!0}),m.observe(this)}disconnectedCallback(){this.#t||this.removeEventListener("click",this.#i.bind(this))}#i(){this.play({focus:!0})}showTextTrack(){const e=[...this.#e.textTracks].find(s=>s.language===E());e&&(e.mode="showing")}enhance(){m.unobserve(this),this.#t&&this.play({focus:!1})}async play({focus:e}){const s=await S().then(({default:i})=>i),d=()=>{this.#e.play(),this.showTextTrack(),e&&this.#e.focus()};if(s.isSupported()){const i=new s;i.loadSource(this.#s),i.attachMedia(this.#e),i.on(s.Events.MANIFEST_PARSED,()=>d());return}if(this.#e.canPlayType("application/vnd.apple.mpegurl")){this.#e.src=this.#s,this.#e.addEventListener("loadedmetadata",()=>d());return}this.#e.src=this.#n,d()}}customElements.define("video-block",p);
